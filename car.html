<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Demo</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="css/select2.css" rel="stylesheet"/>
  <link href="css/service2.css" rel="stylesheet" type="text/css">

  <script src="js/jquery-3.2.1.min.js"></script>
  <script src="js/bootstrap-3-3-7.min.js"></script>
  <script src="js/select2.js"></script>
    <script>
		
		function sendToServer(){
			var car= {};
			car.registrationNumber=$("input[name='regNum']").val();
			car.monthlyUsager=$("input[name='usage']").val();
			car.odoMeterreading=$("input[name='reading']").val();
			car.yearModel=$("input[name='yearModel']").val();
			car.brandg=$("input[name='brand']").val();
			car.fuel=$("input[name='fuel']").val();
			car.usedNew=$("input[name='usedNew']").val();
			car.range=$("input[name='range']").val();
			car.model=$("input[name='model']").val();
			console.log (car)
		}
		function registerHandlers() {
      
      $("#save_car").on("click", sendToServer);
    }
		function populateCar(car){
			console.log("car", car);
			$("input[name='regNum']").val(car.registrationNumber);
			$("input[name='usage']").val(car.monthlyUsage);
			$("input[name='reading']").val(car.odoMeterreading);
	        $("#yearModel").select2().val(car.yearModel).trigger('change');
			$("#brand").select2().val(car.brand).trigger('change');
			$("#fuel").select2().val(car.fuel).trigger('change');
			$("#usedNew").select2().val(car.usedNew).trigger('change');
			$("input[name='range']").val(car.range);
			$("input[name='model']").val(car.model);
		};
		function loadQuoteFromServer(id) {
      console.log("pretending to read quote", id, "from server");
      var quote = {
        person: {
          firstName  : "Johannes",
          lastName  : "Loper",
          idType  : "Drivers License"
        },
        car: {
			registrationNumber : "CX1234",
			monthlyUsage : "2000",
			odoMeterreading : "120000",
			yearModel : "2016",
			brand : "Opel",
			fuel : "Petrol",
			usedNew : "New",
			range : "Lite",
			model : "1.6"

        },
        invoice: {
          date: new Date(2016,7,6),
          items: [
            {
              partNumber: "X123",
              description: "Front Disk Brakes",
              quantity: 2,
              labourUnits: 1.5,
              labourCost: 150.50
            }, {
              partNumber: "X777",
              description: "Rear Drum Brakes",
              quantity: 2,
              labourUnits: 0.5,
              labourCost: 350.50
            }
          ],
          vat: 297.23,
          discount: 97.23,
          total: 2999.99
        }
      };

      return quote;
    }

    $(document).ready(function(){
      $("#yearModel").select2();
      $("#fuel").select2();
      $("#brand").select2();
      $("#usedNew").select2();
		registerHandlers();
		
		var searchString = location.search;
      	if(searchString) {
        	var id = searchString.split("=")[1];
			var quote = loadQuoteFromServer(id);
        	populateCar(quote.car);
      	}

		
    });
	</script>


</head>

<body>
<ul class="nav nav-pills nav-justified">
    <li class="active"><a href="search.html">Search</a></li>
    <li><a href="invoice.html">Invoice</a></li>
    <li><a href="person.html">Person</a></li>
    <li><a href="car.html">Car</a></li>
  </ul>
<table width="13%" border="1">
  <tbody>
    <tr> </tr>
  </tbody>
</table>
<table width="71%" border="1">
  <tbody>
    <tr>
      <td width="17%">Registration Number</td>
      <td width="83%"><input type="text" name="regNum" ></td>
    </tr>
    <tr>
      <td>Year Model</td>
      <td>
        <select name="select" id="yearModel" style="width: 100px;">
          <option value="1990">1990</option>
          <option value="1991">1991</option>
          <option value="1992">1992</option>
          <option value="1993">1993</option>
          <option value="1994">1994</option>
          <option value="1995">1995</option>
          <option value="1996">1996</option>
          <option value="1997">1997</option>
          <option value="1998">1998</option>
          <option value="1999">1999</option>
          <option value="2000">2000</option>
          <option value="2001">2001</option>
          <option value="2002">2002</option>
          <option value="2003">2003</option>
          <option value="2004">2004</option>
          <option value="2005">2005</option>
          <option value="2006">2006</option>
          <option value="2007">2007</option>
          <option value="2008">2008</option>
          <option value="2009">2009</option>
          <option value="2010">2010</option>
          <option value="2011">2011</option>
          <option value="2012">2012</option>
          <option value="2013">2013</option>
          <option value="2014">2014</option>
          <option value="2015">2015</option>
          <option value="2016">2016</option>
          <option value="2017">2017</option>
          <option value="2018">2018</option>
      </select></td>
    </tr>
    <tr>
      <td>Brand</td>
      <td><select name="select2" id="brand" style="width: 100px;">
        <option value="Nissan">Nissan</option>
        <option value="GWM">GWM</option>
        <option value="Toyota">Toyota</option>
        <option value="Ford">Ford</option>
        <option value="Renault">Renault</option>
        <option value="Chevy">Chevy</option>
        <option value="Kia">Kia</option>
        <option value="Opel">Opel</option>
        <option value="Lexus">Lexus</option>
        <option value="Mazda">Mazda</option>
        <option value="Volkswagen">Volkswagen</option>
        <option value="Landrover">Landrover</option>
        <option value="BMW">BMW</option>
        <option value="Mercedes">Mercedes</option>
      </select></td>
    </tr>
    <tr>
      <td>Model</td>
      <td><input type="text" name="model" </td>
    </tr>
    <tr>
      <td>Fuel</td>
      <td><select name="select2" id="fuel" style="width: 100px;">
          <option value="Diesel">Diesel</option>
          <option value="Petrol">Petrol</option>
      </select></td>
    </tr>
    <tr>
      <td>Range</td>
      <td><input type="text" name="range"</td>
    </tr>
    <tr>
      <td>Odometer reading</td>
      <td><input type="number" name="reading"</td>
    </tr>
    <tr>
      <td>Monthly usage(KM)</td>
      <td><input type="number" name="usage" </td>
    </tr>
    <tr>
      <td>Used/New</td>
      <td><select name="select2" id="usedNew" style="width: 100px;">
        <option value="Used">Used</option>
        <option value="New">New</option>
      </select></td>
    </tr>      
  </tbody>
</table>
     <input type="button" id="save_car" value="Save">
</body>
</html>
